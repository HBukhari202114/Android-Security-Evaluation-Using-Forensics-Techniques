// This is an autogenerated file from Firebase Studio.
'use server';
/**
 * @fileOverview Assesses the accuracy of data wipes using AI.
 *
 * - assessWipeAccuracy - A function that handles the wipe accuracy assessment process.
 * - AssessWipeAccuracyInput - The input type for the assessWipeAccuracy function.
 * - AssessWipeAccuracyOutput - The return type for the assessWipeAccuracy function.
 */

import {ai} from '@/ai/genkit';
import {z} from 'genkit';

const AssessWipeAccuracyInputSchema = z.object({
  wipeLogDataUri: z
    .string()
    .describe(
      "Data wipe logs, as a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'."
    ),
});
export type AssessWipeAccuracyInput = z.infer<typeof AssessWipeAccuracyInputSchema>;

const AssessWipeAccuracyOutputSchema = z.object({
  accuracyAssessment: z.object({
    overallAccuracy: z.string().describe('The overall accuracy assessment of the data wipe.'),
    detailedAnalysis: z
      .string()
      .describe('A detailed analysis of the data wipe process, highlighting strengths and weaknesses.'),
    confidenceLevel: z
      .string()
      .describe('The confidence level in the accuracy assessment (e.g., High, Medium, Low).'),
    recommendations: z
      .string()
      .describe('Recommendations for improving the data wipe process in the future.'),
  }),
});
export type AssessWipeAccuracyOutput = z.infer<typeof AssessWipeAccuracyOutputSchema>;

export async function assessWipeAccuracy(input: AssessWipeAccuracyInput): Promise<AssessWipeAccuracyOutput> {
  return assessWipeAccuracyFlow(input);
}

const prompt = ai.definePrompt({
  name: 'assessWipeAccuracyPrompt',
  input: {schema: AssessWipeAccuracyInputSchema},
  output: {schema: AssessWipeAccuracyOutputSchema},
  prompt: `You are a forensic analyst assessing the accuracy of data wipes.

You will use the provided data wipe logs to assess the accuracy of the data wipe process.

Analyze the logs and provide an overall accuracy assessment, a detailed analysis of the process, a confidence level in the assessment, and recommendations for improvement.

Wipe Logs: {{media url=wipeLogDataUri}}`,
});

const assessWipeAccuracyFlow = ai.defineFlow(
  {
    name: 'assessWipeAccuracyFlow',
    inputSchema: AssessWipeAccuracyInputSchema,
    outputSchema: AssessWipeAccuracyOutputSchema,
  },
  async input => {
    const {output} = await prompt(input);
    return output!;
  }
);
